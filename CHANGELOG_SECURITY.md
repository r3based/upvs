# Changelog - Security Improvements

## v2.0.1 - Security Review Fixes (2026-01-09)

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### 1. –£–±—Ä–∞–Ω—ã –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ docker-compose.yml
- **–ë—ã–ª–æ:** `${POSTGRES_PASSWORD:-upvs}` - —Å–ª–∞–±—ã–π –¥–µ—Ñ–æ–ª—Ç
- **–°—Ç–∞–ª–æ:** `${POSTGRES_PASSWORD}` - –û–ë–Ø–ó–ê–¢–ï–õ–ï–ù .env —Ñ–∞–π–ª
- **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–ª—É—á–∞–π–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–¥–∞–∫—à–Ω —Å–æ —Å–ª–∞–±—ã–º–∏ –ø–∞—Ä–æ–ª—è–º–∏
- **–ó–∞—Ç—Ä–æ–Ω—É—Ç–æ:**
  - `POSTGRES_PASSWORD`
  - `API_KEY`
  - `DATABASE_URL`

#### 2. Docker network –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞
- **–ë—ã–ª–æ:** `internal: false` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–æ–≥–ª–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
- **–°—Ç–∞–ª–æ:** `internal: true` - –ø–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –º–æ–≥—É—Ç —Ö–æ–¥–∏—Ç—å –Ω–∞—Ä—É–∂—É, —Ç–æ–ª—å–∫–æ –º–µ–∂–¥—É —Å–æ–±–æ–π
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** pip install —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ build-time, –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç

### üü† –í–∞–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ Authorization –≤ Nginx
- **–î–æ–±–∞–≤–ª–µ–Ω–æ:** `if ($http_authorization = "") { return 401; }`
- **–ì–¥–µ:** `/api/` –∏ `/api/(tree/search|tables/search)`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–ø—Ä–æ—Å—ã –±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –æ—Ç—Å–µ–∫–∞—é—Ç—Å—è –¥–æ FastAPI
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
  - –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –±—ç–∫–µ–Ω–¥
  - –ú–µ–Ω—å—à–µ —à—É–º–∞ –≤ –ª–æ–≥–∞—Ö
  - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –∑–∞—â–∏—Ç—ã

#### 4. OCSP resolver –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
- **–ë—ã–ª–æ:** `resolver 8.8.8.8 8.8.4.4` - Google DNS
- **–°—Ç–∞–ª–æ:** `resolver 127.0.0.53` - —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ä–µ–∑–æ–ª–≤–µ—Ä
- **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö DNS, –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –≤ –†–§

### üü¢ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### 5. Security opt –¥–ª—è API –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **–î–æ–±–∞–≤–ª–µ–Ω–æ:** `security_opt: [no-new-privileges:true]`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏

---

## v2.0.0 - Initial Security Hardening (2026-01-09)

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ó–∞–∫—Ä—ã—Ç—ã Docker –ø–æ—Ä—Ç—ã
- –û—Ç–∫–ª—é—á–µ–Ω—ã Swagger/OpenAPI —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω CORS
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. [SECURITY_SUMMARY.md](./SECURITY_SUMMARY.md) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

---

## –ú–∏–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏

### –° v2.0.0 –Ω–∞ v2.0.1

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**

1. **–°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª:**
   ```bash
   bash scripts/generate_secrets.sh > .env
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   ```bash
   docker compose config
   ```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å:**
   ```bash
   docker compose down
   docker compose up -d
   ```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ–≤–µ–¥–µ–Ω–∏–∏:**
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–µ–∑ .env (–æ—à–∏–±–∫–∞)
- ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã (no egress)
- ‚úÖ Nginx —Ç—Ä–µ–±—É–µ—Ç Authorization –∑–∞–≥–æ–ª–æ–≤–æ–∫

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏

```bash
# –í–µ—Ä—Å–∏—è 2.0.1 –µ—Å–ª–∏:
grep "internal: true" docker-compose.yml
# –ï—Å—Ç—å —Å—Ç—Ä–æ–∫–∞

grep "if (\$http_authorization" nginx/upvs-secure.conf
# –ï—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞

grep "POSTGRES_PASSWORD:-" docker-compose.yml
# –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ (–Ω–µ—Ç –¥–µ—Ñ–æ–ª—Ç–æ–≤)
```

---

**–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è:** 2.0.1  
**–î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞:** 2026-01-09  
**–°—Ç–∞—Ç—É—Å:** Production Ready ‚úÖ

