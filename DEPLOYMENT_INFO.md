# üöÄ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–µ–ø–ª–æ–µ

## üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞

**–î–æ–º–µ–Ω:** upvs.duckdns.org  
**IP –∞–¥—Ä–µ—Å:** 176.126.103.147  
**–î–∞—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:** 2026-01-10

---

## ‚úÖ –ß—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

1. ‚úÖ –î–æ–º–µ–Ω –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –Ω–∞ DuckDNS
2. ‚úÖ IP –∞–¥—Ä–µ—Å —É–∫–∞–∑–∞–Ω –≤ DuckDNS
3. ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx –æ–±–Ω–æ–≤–ª–µ–Ω–∞
4. ‚úÖ OpenAPI schema –æ–±–Ω–æ–≤–ª—ë–Ω

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@176.126.103.147
# –∏–ª–∏
ssh ubuntu@176.126.103.147
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∞–∑–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã

```bash
sudo apt update && sudo apt upgrade -y
sudo apt install -y curl wget git nano
```

### 3. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç

```bash
cd ~
git clone YOUR_REPO_URL upvs
cd upvs
```

**–ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —á–µ—Ä–µ–∑ SCP —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã:**

```bash
# –ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:
cd /home/r3taker/Work/upvs_new
tar -czf upvs.tar.gz upvs/
scp upvs.tar.gz root@176.126.103.147:~/

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
cd ~
tar -xzf upvs.tar.gz
cd upvs
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```bash
cd ~/upvs
sudo bash scripts/security/setup_all.sh
```

–≠—Ç–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç:
- ‚úÖ UFW Firewall (—Ç–æ–ª—å–∫–æ –ø–æ—Ä—Ç—ã 22, 443)
- ‚úÖ Fail2Ban (–∑–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞)
- ‚úÖ SSH hardening (—Ç–æ–ª—å–∫–æ –∫–ª—é—á–∏)
- ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úÖ Docker logging

**–í—Ä–µ–º—è:** ~5-10 –º–∏–Ω—É—Ç

### 5. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã

```bash
cd ~/upvs
bash scripts/generate_secrets.sh > .env

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
cat .env
```

**–í–∞–∂–Ω–æ:** –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–∏ —Å–µ–∫—Ä–µ—Ç—ã –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ!

### 6. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
rm get-docker.sh

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose
sudo apt install -y docker-compose-plugin

# –ü—Ä–æ–≤–µ—Ä–∫–∞
docker --version
docker compose version
```

### 7. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Nginx

```bash
sudo apt install -y nginx
sudo systemctl enable nginx
sudo systemctl start nginx
```

### 8. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
cd ~/upvs

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥
sudo cp nginx/upvs-secure.conf /etc/nginx/sites-available/upvs

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
sudo ln -s /etc/nginx/sites-available/upvs /etc/nginx/sites-enabled/

# –£–¥–∞–ª–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥
sudo rm /etc/nginx/sites-enabled/default

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Nginx
sudo systemctl reload nginx
```

### 9. –ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Certbot
sudo apt install -y certbot python3-certbot-nginx

# –ü–æ–ª—É—á–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
sudo certbot --nginx -d upvs.duckdns.org

# –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:
# - –í–≤–µ–¥–∏—Ç–µ email
# - –°–æ–≥–ª–∞—Å–∏—Ç–µ—Å—å —Å —É—Å–ª–æ–≤–∏—è–º–∏
# - Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç HTTPS
```

### 10. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç

```bash
cd ~/upvs

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose up -d

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker compose logs -f init

# –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è init (—É–≤–∏–¥–∏—Ç–µ "–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞"):
# –ù–∞–∂–º–∏—Ç–µ Ctrl+C

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker compose ps
```

### 11. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

```bash
# Health check
curl https://upvs.duckdns.org/health

# –° –≤–∞—à–∏–º API –∫–ª—é—á–æ–º (–∏–∑ .env)
API_KEY=$(grep API_KEY .env | cut -d= -f2)
curl -H "Authorization: Bearer $API_KEY" \
     https://upvs.duckdns.org/api/tree | jq '.total_pages'
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- Health: `{"status":"ok"}`
- Tree: —á–∏—Å–ª–æ —Å—Ç—Ä–∞–Ω–∏—Ü

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS

**–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ DNS –æ–±–Ω–æ–≤–∏–ª—Å—è:**

```bash
# –ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–µ:
ping upvs.duckdns.org

# –î–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—á–∞—Ç—å: 176.126.103.147
```

**–¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:**

```bash
nslookup upvs.duckdns.org
# –∏–ª–∏
dig upvs.duckdns.org
```

**–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:** A record ‚Üí 176.126.103.147

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤

**–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ firewall:**

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
sudo ufw status

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# 22/tcp    ALLOW
# 443/tcp   ALLOW
# 80/tcp    ALLOW (–µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–∏–ª–∏ –¥–ª—è Let's Encrypt)
```

**–°–Ω–∞—Ä—É–∂–∏ (—Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞):**

```bash
nmap upvs.duckdns.org

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –¢–û–õ–¨–ö–û:
# 22/tcp  open  ssh
# 443/tcp open  https
```

---

## ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ChatGPT Action

### 1. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ OpenAPI —Å —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
cd ~/upvs
docker compose exec api python scripts/export_openapi.py
docker compose cp api:/app/openapi.json ./openapi.json

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä
# –ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:
scp root@176.126.103.147:~/upvs/openapi.json ~/Desktop/
```

**–ò–õ–ò** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π `openapi.json` (—É–∂–µ –æ–±–Ω–æ–≤–ª—ë–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º URL).

### 2. –í ChatGPT

1. Configure ‚Üí Actions ‚Üí Create new GPT
2. –î–æ–±–∞–≤—å—Ç–µ Action
3. –í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `openapi.json`
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é:
   - **Auth Type**: Bearer
   - **Token**: –≤–∞—à API_KEY –∏–∑ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ

–°–ø—Ä–æ—Å–∏—Ç–µ —É GPT:
```
–ö–∞–∫–∏–µ —Ä–∞–∑–¥–µ–ª—ã –µ—Å—Ç—å –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ UPVS?
```

GPT –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å –¥–µ—Ä–µ–≤–æ —Ä–∞–∑–¥–µ–ª–æ–≤ —á–µ—Ä–µ–∑ API.

---

## üîê –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- [ ] UFW –≤–∫–ª—é—á—ë–Ω (—Ç–æ–ª—å–∫–æ 22, 443)
- [ ] Fail2Ban —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] SSH —Ç–æ–ª—å–∫–æ –ø–æ –∫–ª—é—á—É (no passwords)
- [ ] Nginx —Å HTTPS (SSL –æ—Ç Let's Encrypt)
- [ ] Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
- [ ] API —Ç—Ä–µ–±—É–µ—Ç Bearer token
- [ ] /docs –∏ /openapi.json –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 404
- [ ] –°–µ–∫—Ä–µ—Ç—ã –≤ .env —Å–∏–ª—å–Ω—ã–µ (32+ —Å–∏–º–≤–æ–ª–æ–≤)

---

## üÜò Troubleshooting

### DNS –Ω–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ DuckDNS —á—Ç–æ IP –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
# –ü–æ–¥–æ–∂–¥–∏—Ç–µ 5-10 –º–∏–Ω—É—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DNS
```

### –ù–µ –º–æ–≥—É –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –ø–æ SSH

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
ping 176.126.103.147
```

### Certbot –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ DNS —Ä–∞–±–æ—Ç–∞–µ—Ç:
nslookup upvs.duckdns.org

# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç 80 –æ—Ç–∫—Ä—ã—Ç:
sudo ufw allow 80/tcp

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Nginx:
sudo nginx -t
sudo systemctl status nginx
```

### API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
docker compose ps

# –õ–æ–≥–∏:
docker compose logs api

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª:
cat .env
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

**–î–æ–º–µ–Ω:** https://upvs.duckdns.org  
**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DNS:** https://www.duckdns.org  
**IP —Å–µ—Ä–≤–µ—Ä–∞:** 176.126.103.147

---

**–í–µ—Ä—Å–∏—è:** 2.0.1  
**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 2026-01-10

