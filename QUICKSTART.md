# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç UPVS API

## –ó–∞–ø—É—Å–∫ –∑–∞ 3 —à–∞–≥–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ API –∫–ª—é—á

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
echo "API_KEY=my-secret-key-123" > .env
```

> üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á! –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–∞—è —Å—Ç—Ä–æ–∫–∞.

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç

```bash
docker-compose up -d
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç PostgreSQL
- ‚úÖ –ó–∞–≥—Ä—É–∑–∏—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `data/raw/`
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç API –Ω–∞ –ø–æ—Ä—Ç—É 8000

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
http://localhost:8000/docs
```

–í—ã —É–≤–∏–¥–∏—Ç–µ Swagger UI —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π API.

## üìù –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã

### –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ä–µ–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü

```bash
curl -H "Authorization: Bearer my-secret-key-123" \
     http://localhost:8000/api/tree
```

### –ù–∞–π—Ç–∏ —Ç–∞–±–ª–∏—Ü—É

```bash
curl -H "Authorization: Bearer my-secret-key-123" \
     "http://localhost:8000/api/tables/search?query=–∂–∏–ª—ã–µ"
```

## ü§ñ –î–ª—è ChatGPT Actions

1. –ü–æ–ª—É—á–∏—Ç–µ OpenAPI schema:
   ```
   http://localhost:8000/openapi.json
   ```

2. –°–æ–∑–¥–∞–π—Ç–µ Action –≤ ChatGPT:
   - **Authentication**: Bearer
   - **Token**: –≤–∞—à API –∫–ª—é—á –∏–∑ `.env`
   - **Schema**: —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ `/openapi.json`

3. –ï—Å–ª–∏ API –ª–æ–∫–∞–ª—å–Ω—ã–π, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [ngrok](https://ngrok.com):
   ```bash
   ngrok http 8000
   ```

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
docker-compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose restart api

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker-compose logs -f api

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d --build
```

## üìñ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. [README_CHATGPT.md](./README_CHATGPT.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

